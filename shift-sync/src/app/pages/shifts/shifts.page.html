<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Shift Management</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="openAddShiftModal()">
        <ion-icon slot="start" name="add"></ion-icon>
        + Add Shift
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="dashboard-content">
  <!-- Filters -->
  <div class="dashboard-card">
    <div class="filter-container">
      <select class="filter-dropdown" [(ngModel)]="selectedDepartment" (change)="onFilterChange()">
        <option value="">All Departments</option>
        <option *ngFor="let dept of departments" [value]="dept.id">{{ dept.name }}</option>
      </select>

      <select class="filter-dropdown" [(ngModel)]="selectedDay" (change)="onFilterChange()">
        <option value="">All Days</option>
        <option *ngFor="let day of days" [value]="day">{{ day }}</option>
      </select>
    </div>
  </div>

  <!-- Shifts List -->
  <div class="dashboard-card">
    <div class="card-header">
      <h2>Current Shifts</h2>
    </div>

    <table class="employee-table">
      <thead>
        <tr>
          <th>Shift Name</th>
          <th>Department</th>
          <th>Day</th>
          <th>Time</th>
          <th>Assigned</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let shift of filteredShifts">
          <td>{{ shift.name }}</td>
          <td>{{ getDepartmentName(shift.departmentId) }}</td>
          <td>{{ shift.day }}</td>
          <td>{{ shift.startTime }} - {{ shift.endTime }}</td>
          <td>{{ shift.assignedEmployees?.length || 0 }}</td>
          <td>
            <div class="action-buttons">
              <button class="action-button edit-icon" (click)="openEditShiftModal(shift)"></button>
              <button class="action-button delete-icon" (click)="confirmDelete(shift)"></button>
            </div>
          </td>
        </tr>
        <tr *ngIf="!filteredShifts.length">
          <td colspan="6" class="no-shifts">No shifts found</td>
        </tr>
      </tbody>
    </table>
  </div>
</ion-content>
